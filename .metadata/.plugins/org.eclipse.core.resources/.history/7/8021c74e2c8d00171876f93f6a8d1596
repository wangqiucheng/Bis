<%@page import="com.bisa.health.basic.dao.SystemContext"%>
<%@ page language="java" contentType="text/html; charset=utf-8"
    pageEncoding="utf-8"%>
   <%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type"  name="viewport" content="width=device-width,initial-scale=1.0">
	<link rel="stylesheet" href="<%=request.getContextPath()%>/resources/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="<%=request.getContextPath()%>/resources/css/report_list.css"/><!--报告列表样式-->
	<link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/resources/css/jcDate.css" media="all" />
 	<script type="text/javascript" src="<%=request.getContextPath()%>/resources/js/jquery-1.11.1.min.js" ></script> 
	<script type="text/javascript" src="<%=request.getContextPath()%>/resources/js/report_list.js" ></script>
	<script type="text/javascript" src="<%=request.getContextPath()%>/resources/js/jquery.min2.js" ></script>
	<title>报告列表</title>
	<style></style>
</head>
<body>
	<div class="container-fluid">
		<div class="row">
			<div class="conbody container-fluid">
				<div class="list-title">
					<span><i></i>我的报告></span><span class="spana">报告列表</span>
				</div>
				<div class="report-title col-md-12">
					<div class="qiehuan"><!--报告类型,点击可选择切换查看报告列表-->
						<a class="onetitle onetitles" href="${type_url}type=1" target="form-content">一分钟报告</a>
						<a class="onetitles twotitle" href="${type_url}type=2" target="form-content">24小时报告</a>
					</div>
					<div class="sort">
						<a href="" class="spansort spansorts">点击排序:</a>
						<a class="spansort" href="${url}sort=report_name&order=asc" target="form-content" >报告名称</a>
						<a class="spansort" href="${url}sort=submit_time&order=desc" target="form-content">报告日期</a>
						<a class="spansort" href="${url}sort=report_status&order=asc" target="form-content">是否查看</a>
					</div>
			<!-- 		<div class="date">日期选择
						<div style="">
							<span>选择报告时间:&nbsp;</span>选择日期查看当日所有的一分钟报告和二十四小时报告列表,点击选择日期,无需确认
							<input class="jcDate " />
						</div>
					</div> -->
					<div class="date"><!-- 日期选择 -->
						<div style="">
							<form id="submitNowTime" action="<%=request.getContextPath()%>/report/reportList" target="form-content" method="get">
								<input type="text" class="jcDate " value="${submit_time!=null&&!submit_time.equals('null')?submit_time:''}" name="submit_time" style="width:190px; height:25px; line-height:20px;" />
								<%-- <input type="hidden" name="report_type" value="${report_type!=null||!submit_time.equals('null')?report_type:0}" /> --%>
							</form>
						</div>
					</div>
					<script type="text/javascript" src="<%=request.getContextPath()%>/resources/js/bootstrap.min.js" ></script>
					<script type="text/javascript" src="<%=request.getContextPath()%>/resources/js/jQuery-jcDate.js" charset="utf-8"></script>
					<script  type="text/javascript" >
					//日历控件初始化
					$(function (){
						var jcDate= $("input.jcDate").jcDate({					       
								IcoClass : "jcDateIco",
								Event : "click",
								Speed : 100,
								Left : 0,
								Top : 28,
								format : "-",
								Timeout : 100
						});	
					});
					</script>
				</div>
				<div class="report-list col-md-12"><!--报告列表start-->
					<!-- 1分钟报告 -->
					<div class="report-body1"style="display: block;">
					<c:forEach items="${ReportList.datas}" var="MReport" varStatus="ac">
						<div class="report-list1">
							<p><a class="spanaClick"href="<%=request.getContextPath() %>/report/showReport/${MReport.report_name}"><span class="spana">${MReport.report_name}</span></a><span class="spanb"><i></i>${MReport.submit_time}</span><span class="spanc" >${MReport.report_status}</span></p>
						</div>
						</c:forEach>
					</div>
				</div><!--end报告列表-->
				</div>
		</div>
		<script type="text/javascript">
		
		 //查看状态的颜色更改
		window.onload=function(){
			//查看状态的颜色更改代码
			var type = document.getElementsByClassName("spanc");//获得报告状态
			var spana = document.getElementsByClassName("spanaClick");//获得超链接对象
			var typeText =null;
			var aTag = null;
			for(var i in type){
				typeText = type[i].innerText;
				aTag = type[i];
				//未查看
				if(typeText==1){
					aTag.innerText="未查看";
					aTag.setAttribute("class","spanc nocheck");
				}if(typeText==2){//已查看
					aTag.innerText="已查看";
					aTag.setAttribute("class","spanc");
				}if(typeText==0){//正在生成
					aTag.innerText="生成中";
					aTag.setAttribute("class","spanc checking");
					spana[i].setAttribute("href","#");
					spana[i].onclick=foo;
					function foo(){
						alert("您的报告正在生成中，暂时无法查看");
					};
				}
			}
		}; 
		
/* 		//JQuery实现
		$(function(){});
		
		$(window).ready(){} */
		</script>
 		<!-- 分页 -->
			<jsp:include page="/jsp/NewPager.jsp">
				<jsp:param value="${ReportList.total}" name="totalRecord" />
				<jsp:param value="reportList" name="url" />
			</jsp:include>   
			</div>
</body>
</html>